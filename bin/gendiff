#!/usr/bin/env php
<?php  

use function Differ\Differ\makeCLIInterface;
use function Differ\Differ\genDiff;

try {
    $autoloadPathV1 = '../vendor/autoload.php';
    $autoloadPathV2 = __DIR__ . "/../../../autoload.php";
    $autoloadPathV3 = __DIR__ . "\\..\\..\\..\\autoload.php";

    if (file_exists($autoloadPathV1)) {
        require_once $autoloadPathV1;
    } elseif (file_exists($autoloadPathV2)) {
        require_once $autoloadPathV2;
    } else {
        require_once $autoloadPathV3;
    }

    $docoptResponse = makeCLIInterface();

    if (isset($docoptResponse->args['<firstFile>']) && $docoptResponse->args['<secondFile>']) {
        $diff = genDiff($docoptResponse->args['<firstFile>'], $docoptResponse->args['<secondFile>'], $docoptResponse->args['--format']);
        echo $diff;
    }
} catch (\Exception $e) {
    exit("Error: {$e->getMessage()}\n");
}


?>